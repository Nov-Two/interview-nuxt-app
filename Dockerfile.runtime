# Runtime Dockerfile for CI-built artifacts
# This image only runs the pre-built application, avoiding compilation on the server
FROM node:20-slim

WORKDIR /app

# Copy the built output from the CI runner
COPY .output .output

# Set environment variables
ENV NUXT_HOST=0.0.0.0
ENV NUXT_PORT=3000
ENV NODE_ENV=production

# Expose port
EXPOSE 3000

# Start application
CMD ["node", ".output/server/index.mjs"]
